---
import BaseLayout from './BaseLayout.astro';

interface Props {
  title?: string;
  description?: string;
}

const { title, description } = Astro.props;

// Build-time docs navigation structure
const docsNav = [
  {
    section: 'Getting Started',
    items: [
      { title: 'Documentation', href: '/docs', order: 0 }
    ]
  },
  {
    section: 'Stokoe',
    items: [
      { title: 'Five-Lane Architecture', href: '/docs/stokoe/architecture', order: 1 }
    ]
  },
  {
    section: 'Catalyst',
    items: [
      { title: 'Catalyst Architecture', href: '/docs/catalyst/architecture', order: 2 }
    ]
  }
];

const currentPath = Astro.url.pathname;
---

<BaseLayout title={title} description={description}>
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8">
    <div class="flex flex-col lg:flex-row gap-8">
      <!-- Sidebar -->
      <aside class="lg:w-64 shrink-0">
        <nav class="glass sticky top-24 rounded-lg p-4 lg:p-6" aria-label="Documentation navigation">
          <h2 class="sr-only">Documentation sections</h2>
          {docsNav.map((section) => (
            <div class="mb-6 last:mb-0">
              <h3 class="mb-2 text-xs font-heading font-semibold uppercase tracking-wider text-navy/60">
                {section.section}
              </h3>
              <ul class="space-y-1">
                {section.items.map((item) => (
                  <li>
                    <a
                      href={item.href}
                      class:list={[
                        'block rounded-md px-3 py-2 text-sm font-medium transition-all duration-150',
                        currentPath === item.href
                          ? 'bg-cyan/10 text-cyan'
                          : 'text-navy/80 hover:bg-navy/5 hover:text-navy'
                      ]}
                      aria-current={currentPath === item.href ? 'page' : undefined}
                    >
                      {item.title}
                    </a>
                  </li>
                ))}
              </ul>
            </div>
          ))}
        </nav>
      </aside>

      <!-- Main content area - solid white background for readability -->
      <article class="flex-1 min-w-0">
        <div class="prose prose-lg max-w-none prose-headings:font-heading prose-headings:text-navy prose-a:text-cyan prose-a:no-underline hover:prose-a:underline prose-code:text-navy prose-pre:bg-navy prose-pre:text-gray-100">
          <slot />
        </div>
      </article>
    </div>
  </div>
</BaseLayout>
